# Система управления отпусками - Описание проекта

## Общее описание
Проект представляет собой систему управления отпусками для организации, реализованную в двух интерфейсах:
1. Telegram-бот для удобного мобильного доступа
2. Веб-приложение на Django для работы через браузер

Система позволяет сотрудникам подавать заявки на отпуск и отслеживать процесс их согласования через любой удобный интерфейс.

## Структура проекта

### Backend (`/backend`)
Django-приложение, обеспечивающее хранение данных и бизнес-логику.

#### Основные компоненты:
- `vacation_service/` - основной модуль Django-проекта
  - `settings.py` - настройки проекта
  - `urls.py` - конфигурация URL-маршрутов
  
- `vacation/` - основное приложение
  - `models.py` - модели данных
  - `views.py` - представления API и веб-интерфейса
  - `admin.py` - настройки административной панели
  - `templates/` - шаблоны для веб-интерфейса
  - `static/` - статические файлы (CSS, JavaScript)

- `scripts.py` - скрипты для синхронизации данных с Excel

### Telegram Bot (`/tg`)
Мобильный интерфейс взаимодействия с пользователями через Telegram.

#### Основные компоненты:
- `bot.py` - основной файл бота
- `config.py` - конфигурация бота
- `models.py` - модели данных для бота

#### Handlers (обработчики команд):
1. **Административные функции** (`/handlers/admin/`)
   - `new_users.py` - управление новыми пользователями
   - `panel.py` - административная панель

2. **Аутентификация** (`/handlers/auth/`)
   - `permissions.py` - управление правами доступа

3. **Управление отпусками** (`/handlers/vacation/`)
   - `request.py` - обработка заявок на отпуск
   - `message_handler.py` - обработка сообщений

## Процесс работы системы

1. **Регистрация пользователей**
   - Новые пользователи могут зарегистрироваться через бота или веб-интерфейс
   - Администраторы подтверждают регистрацию через административную панель

2. **Подача заявки на отпуск**
   - Сотрудник создает заявку через бота или веб-интерфейс
   - Указывает даты начала и окончания отпуска
   - Может добавить комментарий к заявке

3. **Процесс согласования**
   - Заявка проходит процесс согласования в соответствии с данными из таблицы approval_process
   - Система отслеживает все подписи и согласования
   - Согласующие могут обрабатывать заявки через любой интерфейс

4. **Уведомления**
   - Система автоматически уведомляет всех участников процесса о статусе заявки
   - В веб-интерфейсе уведомления отображаются в реальном времени
   - В Telegram отправляются мгновенные сообщения

## Технический стек

- **Backend**: Django
- **База данных**: MariaDB
- **Bot Framework**: python-telegram-bot
- **Веб-интерфейс**: 
  - Django Templates
  - Bootstrap 5
  - HTMX для динамических обновлений
- **Дополнительные библиотеки**: 
  - python-dotenv (конфигурация)
  - requests (HTTP-запросы)
  - SQLAlchemy (ORM)
  - pandas (обработка Excel)
  - unidecode (транслитерация)
